<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script type="text/javascript" src="js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.10.1.custom.js"></script>
<script type="text/javascript" src="js/person.js"></script>
<script type="text/javascript" src="js/XMLContactParse.js"></script>
<link rel="stylesheet" href="css/billsplit-theme/jquery-ui-1.10.1.custom.css">
<link rel="stylesheet" href="css/style.css">
<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:300italic,400italic,400,300' rel='stylesheet' type='text/css'>
</head>
<body>
<script>
var foodUserList = new Array();
var foodItemList = new Array();

$(function() {
	
});

function foodItem(name, price)
{
	this.name = name; 
	this.price = price;
}

function foodUserDialogListener() 
{
	$('#food-user-dialog-list').dialog({
		autoOpen: false,
		resizable: false,
		draggable: false,
		height: 300
	});
	
	$('#food-user-dialog-input').dialog({
		autoOpen:false, 
		resizable: false, 
		draggable: false,
		height: 300,
		buttons: {
			"Cancel": function() {
				$(this).dialog('close')
			},
			"Add": function() {
				var name = $('#food-user-name-input').val();
				var email = $('#food-user-email-input').val();
				var phone = $('#food-user-email-input').val();
				
				for(var i = 0; i < f.length; i++)
				{
					if(name == foodUserList[i].name)
					{
						$(this).dialog('close')
						alert('User with that name already exists!');
					}
							
				}
				
				foodUserList.push(new person(name, email, phone));
				$('#food-user-list').append(name + '<br/>')
				$(this).dialog('close');
			} 
		}
	});

	$('#food-user-add-button').click(function() {
		
		var foodListHtml = '<li>New User</li>';
		
		for(var i = 0; i < contactsList.length; i++)
		{
			foodListHtml += '<li>' + contactsList[i].name + '</li>'		
		}
		
		$('#food-user-dialog-list ul').html(foodListHtml);
		
		$('#food-user-dialog-list li').click(function() {
			
			var selection = $(this).text();
			
			if(selection == "New User")
			{
				$('#food-user-name-input').val('');
				$('#food-user-email-input').val('');
				$('#food-user-phone-input').val('');
			}
			else
			{
				foodUserList.push(selection + "<br />");
			}
			
			$('#food-user-dialog-list').dialog('close');
		});
		
		$('#food-user-dialog-list').dialog('open');
		$('#food-user-label-button').click();
	});

}

function foodItemDialogListener() 
{
	$('#food-item-dialog-list').dialog({
		autoOpen: false,
		resizable: false,
		draggable: false,
		height: 300
	});
	
	$('#food-item-dialog-input').dialog({
		autoOpen:false, 
		resizable: false, 
		draggable: false,
		height: 300,
		buttons: {
			"Cancel": function() {
				$(this).dialog('close')
			},
			"Add": function() {
				var name = $('#food-item-name-input').val();
				var price = $('#food-item-price-input').val();
				
				for(var i = 0; i < foodItemList.length; i++)
				{
					if(name == foodItemList[i].name)
					{
						foodItemList[i].price = price;
						$('#food-item-list').append(name + ' ' + price + '<br/>')
						$(this).dialog('close')
					}
							
				}
				
				foodItemList.push(new foodItem(name, price));
				$('#food-item-list').append(name + ' ' + price + '<br/>')
				$(this).dialog('close');
			} 
		}
	});

	$('#food-item-add-button').click(function() {
		
		var foodListHtml = '<li>Add Food Item</li>';
		
		for(var i = 0; i < foodItemList.length; i++)
		{
			foodListHtml += '<li>' + foodItemList[i].name + '</li>'		
		}
		
		$('#food-item-dialog-list ul').html(foodListHtml);
		
		$('#food-item-dialog-list li').click(function() {
			
			var selection = $(this).text();
			
			if(selection == "Add Food Item")
			{
				$('#food-item-name-input-span').show();
				$('#food-item-name-input').val('');
				$('#food-item-price-input').val('');
			}
			else
			{
				$('#food-item-name-input-span').hide();
				$('#food-item-name-input').val(selection)
			}
			
			$('#food-item-dialog-list').dialog('close');
			$('#food-item-dialog-input').dialog('open');
		});
		
		$('#food-item-dialog-list').dialog('open');
		$('#food-item-label-button').click();
	});
}

function foodFormListener() {
	
	$('#food-user-label-button').click(function() {
		$('#food-item-list').hide('blind', 500);
		$('#food-user-list').show('blind', 500);		
	});
	
	$('#food-item-label-button').click(function() {
		$('#food-user-list').hide('blind', 500);		
		$('#food-item-list').show('blind', 500);
	});

	foodUserDialogListener();
	foodItemDialogListener();
	
	$('#foodRadio').click();
	$('#foodForm').show(); 
}

function rentFormListener() {
	
	$('#rent-user-label').click(function() {
		$('#rent-item-list').hide('blind', 500);
		$('#rent-user-list').show('blind', 500);		
	});
	
	$('#rent-item-label').click(function() {
		$('#rent-user-list').hide('blind', 500);		
		$('#rent-item-list').show('blind', 500);
	});
}

function tripFormListener() {
	
	$('#trip-user-label').click(function() {
		$('#trip-item-list').hide('blind', 500);
		$('#trip-user-list').show('blind', 500);		
	});
	
	$('#trip-item-label').click(function() {
		$('#trip-user-list').hide('blind', 500);		
		$('#trip-item-list').show('blind', 500);
	});
}


function buttonListeners()
{
	$('#nav-bar-radio').buttonset();
	
	$('#nav-bar-radio').change(function() {
		if($('#foodRadio').is(':checked'))
		{
			$('#tripForm').hide();
			$('#rentForm').hide();
			$('#foodForm').show(); 
		}
		else if($('#tripRadio').is(':checked'))
		{
			$('#foodForm').hide();
			$('#rentForm').hide();
			$('#tripForm').show(); 
		}
		else if($('#rentRadio').is(':checked'))
		{
			$('#foodForm').hide();
			$('#tripForm').hide();
			$('#rentForm').show(); 
		}	
	});
	
	$('.add-button').button();
	$('.label-button').button();
	$('.invoice-button').button();
}

$(document).ready(function() {
	xmlParse();
	buttonListeners();
	foodFormListener();
	rentFormListener();
	tripFormListener();
	
});
</script>


<div id="content">
	<div id="nav-bar">
		<div id="nav-bar-radio">
			<input type="radio" id="foodRadio" name="optionsRadio" checked/><label for="foodRadio">Food</label>
			<input type="radio" id="rentRadio" name="optionsRadio" /><label for="rentRadio">Rent</label>
			<input type="radio" id="tripRadio" name="optionsRadio" /><label for="tripRadio">Trip</label>
		</div>
	</div>
	<div id="form-wrapper">
		<div id="foodForm" style="display:none;">
			<div class="title-bar">
				<p>Food</p>
			</div>
			<div class="input-form">
				<div class="user-form">
					<button id="food-user-add-button" class="add-button">+</button>
				 	<button id="food-user-label-button" class="label-button">Users</button>
					<div class="clearDiv"></div>
					<div id="food-user-list" class="list" class="label-button">
					</div>
				</div>
				<div class="clearDiv"></div>
				<div class="items-form">
					<button id="food-item-add-button" class="add-button">+</button>
					<button id="food-item-label-button" class="label-button">Food Items</button>
					<div class="clearDiv"></div>
					<div id="food-item-list" class="list">
					</div>
				</div>
				<div class="clearDiv"></div>
				<div class="extra-form">
					<div>
						<label for="tipInput" class="label">Tip % </label>
						<input id="tipInput" class="tipTaxInput" type="text" />
					</div>
					<div class="clearDiv"></div>
					<div class="items-form">
						<label for="taxInput" class="label">Tax % </label>
						<input id="taxInput" class="tipTaxInput" type="text" />
					</div>
				</div>
				<div class="clearDiv"></div>
				<button id="food-invoice" class="invoice-button">Invoice</button>
			</div>
			<div id="food-user-dialog-list" title="Select User">
				<ul>
				</ul>
			</div>
			<div id="food-user-dialog-input" title="Set User Info">
					<label for="food-user-name-input">Name</label>
					<input type="text" name="food-user-name-input" id="food-user-name-input" />
				<label for="food-user-email-input">Price</label>
				<input type="text" name="food-user-email-input" id="food-user-email-input" />
				<label for="food-user-phone-input">Phone</label>
				<input type="text" name="food-user-phone-input" id="food-user-phone-input" />
			</div>
			<div id="food-item-dialog-list" title="Select Food Item">
				<ul>
				</ul>
			</div>
			<div id="food-item-dialog-input" title="Set Food Info">
				<span id='food-item-name-input-span'>
					<label for="food-item-name-input">Name</label>
					<input type="text" name="food-item-name-input" id="food-item-name-input" />
				</span>
				<label for="food-item-price-input">Price</label>
				<input type="text" name="food-item-price-input" id="food-item-price-input" />
			</div>
		</div>
		<div class="clearDiv"></div>
		<div id="rentForm" style="display:none;">
			<div class="title-bar">
				<p>Rent</p>
			</div>
			<div class="input-form">
				<div class="user-form">
					<button id="rent-user-add" class="add-button">+</button>
				 	<button id="rent-user-label" class="label-button">Users</button>
					<div class="clearDiv"></div>
					<div id="rent-user-list" class="list" class="label-button">
						<p>
							Kelvin Nguyen<br/>
							Albert Luk<br />
							Sohrob Raja<br />
							Minh Vo
						</p>
					</div>
				</div>
				<div class="clearDiv"></div>
				<div class="items-form">
					<button id="rent-item-add" class="add-button">+</button>
					<button id="rent-item-label" class="label-button">Bills</button>
					<div class="clearDiv"></div>
					<div id="rent-item-list" class="list" class="label-button">
						<p>
							Electricity $49.99<br/>							
							Internet $49.99<br/>
							Water $49.99
						</p>
					</div>
				</div>
				<div class="clearDiv"></div>
				<div class="extra-form">
					<div>
						<label for="rentInput" class="potLabel">Rent </label>
						<input id="rentInput" class="potInput" type="text" />
					</div>
				</div>
				<div class="clearDiv"></div>
				<button id="rent-invoice" class="invoice-button">Invoice</button>
			</div>
		</div>
		<div class="clearDiv"></div>
		<div id="tripForm" style="display:none;">
			<div class="title-bar">
				<p>Trip</p>
			</div>
			<div class="input-form">
				<div class="user-form">
					<button id="trip-user-add" class="add-button">+</button>
				 	<button id="trip-user-label" class="label-button">Users</button>
					<div class="clearDiv"></div>
					<div id="trip-user-list" class="list" class="label-button">
						<p>
							Kelvin Nguyen<br/>
							Albert Luk<br />
							Sohrob Raja<br />
							Minh Vo
						</p>
					</div>
				</div>
				<div class="clearDiv"></div>
				<div class="items-form">
					<button id="trip-item-add" class="add-button">+</button>
					<button id="trip-item-label" class="label-button">Travel Items</button>
					<div class="clearDiv"></div>
					<div id="trip-item-list" class="list" class="label-button">
						<p>
							Gas $149.99<br/>							
							Hotel $149.99<br/>
							Food $49.99
						</p>
					</div>
				</div>
				<div class="clearDiv"></div>
				<div class="extra-form">
					<div>
						<label for="tripPotInput" class="potLabel">Total Pot </label>
						<input id="tripPotInput" class="potInput" type="text" />
					</div>
				</div>
				<div class="clearDiv"></div>
				<button id="trip-invoice" class="invoice-button">Invoice</button>
			</div>
			
		</div>
		<div class="clearDiv"></div>
		
	</div>
</div>
</body>
</html>